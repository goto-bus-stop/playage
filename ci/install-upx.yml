steps:
  - script: |
      set -e
      curl https://github.com/upx/upx/releases/download/v3.95/upx-3.95-amd64_linux.tar.xz -LsSf | tar xJ
      echo "##vso[task.setvariable variable=PATH;]$PATH:$PWD/upx-3.95-amd64_linux"
    displayName: "Install upx (*nix)"
    condition: not(eq(variables['Agent.OS'], 'Windows_NT'))
  - script: |
      set -e
      curl https://github.com/upx/upx/releases/download/v3.95/upx-3.95-win64.zip -LsSf -o upx-3.95-win64.zip
      unzip upx-3.95-win64.zip
      echo "##vso[task.setvariable variable=PATH;]$PATH:$PWD/upx-3.95-win64"
    displayName: "Install upx (Windows)"
    condition: not(eq(variables['Agent.OS'], 'Windows_NT'))
